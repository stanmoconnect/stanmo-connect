<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Complaints ‚Äî Stanmo Connect</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root { --orange: #F47B20; --dark: #0d1117; --card: #161b22; --border: #30363d; --text: #e6edf3; --muted: #8b949e; --green: #3fb950; }
    body { background: var(--dark); color: var(--text); font-family: 'DM Sans', sans-serif; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem 1rem; }
    .logo { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.5rem; color: var(--orange); text-decoration: none; margin-bottom: 2rem; display: block; text-align: center; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 2.5rem 2rem; width: 100%; max-width: 500px; }
    h1 { font-family: 'Syne', sans-serif; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.4rem; }
    .subtitle { color: var(--muted); font-size: 0.9rem; margin-bottom: 2rem; }
    .form-group { margin-bottom: 1.25rem; }
    label { display: block; font-size: 0.85rem; font-weight: 500; margin-bottom: 0.4rem; }
    input, select, textarea { width: 100%; background: var(--dark); border: 1px solid var(--border); border-radius: 8px; color: var(--text); padding: 0.75rem 1rem; font-size: 0.9rem; font-family: 'DM Sans', sans-serif; outline: none; }
    input:focus, select:focus, textarea:focus { border-color: var(--orange); }
    select option { background: var(--dark); }
    textarea { resize: vertical; min-height: 100px; }
    .btn { width: 100%; background: var(--orange); color: #fff; border: none; border-radius: 10px; padding: 0.9rem; font-size: 1rem; font-weight: 600; font-family: 'Syne', sans-serif; cursor: pointer; margin-top: 0.5rem; }
    .success-box { background: rgba(63,185,80,0.1); border: 1px solid rgba(63,185,80,0.3); border-radius: 10px; padding: 1.25rem; display: none; }
    .success-box h3 { color: var(--green); font-family: 'Syne', sans-serif; margin-bottom: 0.5rem; }
    .success-box p { color: var(--muted); font-size: 0.88rem; line-height: 1.6; }
    .back-link { text-align: center; margin-top: 1.5rem; font-size: 0.88rem; color: var(--muted); }
    .back-link a { color: var(--orange); text-decoration: none; }
  </style>
</head>
<body>
  <a class="logo" href="index.html">SC STANMO CONNECT</a>
  <div class="card">
    <h1>üìã Submit a Complaint</h1>
    <p class="subtitle">We take all complaints seriously and respond within 24 hours.</p>

    <div class="success-box" id="success-box">
      <h3>‚úÖ Complaint Received!</h3>
      <p id="auto-response-text">Your complaint has been logged and our team will respond shortly.</p>
    </div>

    <form id="complaint-form">
      <div class="form-group">
        <label>Your Full Name</label>
        <input type="text" id="c-name" placeholder="Enter your name" required/>
      </div>
      <div class="form-group">
        <label>Email Address</label>
        <input type="email" id="c-email" placeholder="your@email.com" required/>
      </div>
      <div class="form-group">
        <label>Phone / WhatsApp</label>
        <input type="tel" id="c-phone" placeholder="08012345678"/>
      </div>
      <div class="form-group">
        <label>Complaint Type</label>
        <select id="c-type" required>
          <option value="">Select type</option>
          <option value="payment">Payment Issue</option>
          <option value="provider">Provider Complaint</option>
          <option value="job">Job Dispute</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="form-group">
        <label>Describe Your Complaint</label>
        <textarea id="c-message" placeholder="Tell us exactly what happened..." required></textarea>
      </div>
      <button type="submit" class="btn" id="submit-btn">Submit Complaint</button>
    </form>

    <div class="back-link"><a href="index.html">‚Üê Back to Home</a></div>
  </div>

<script>
  const SERVER_URL = 'https://stanmo-connect-server.onrender.com';

  document.getElementById('complaint-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const btn = document.getElementById('submit-btn');
    btn.textContent = 'Submitting...';
    btn.disabled = true;

    const data = {
      name: document.getElementById('c-name').value,
      email: document.getElementById('c-email').value,
      phone: document.getElementById('c-phone').value,
      type: document.getElementById('c-type').value,
      message: document.getElementById('c-message').value
    };

    try {
      const res = await fetch(SERVER_URL + '/complaint', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();

      document.getElementById('complaint-form').style.display = 'none';
      document.getElementById('auto-response-text').textContent = result.autoResponse;
      document.getElementById('success-box').style.display = 'block';
    } catch(err) {
      btn.textContent = 'Submit Complaint';
      btn.disabled = false;
      alert('Error submitting complaint. Please WhatsApp us on 09161036705');
    }
  });
</script>
</body>
</html>
